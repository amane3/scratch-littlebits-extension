<html>
<head>
  <title>Scratch littleBits Extension</title>
  <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
  <script type="text/javascript" src="js/main.js"></script>
  <link rel="stylesheet" type="text/css" href="css/style.css"></link>
</head>
<body>

<div id="header-container">
  <header>
    <h1>Scratch littleBits Extension</h1>
  </header>
</div>

<div id="content-container">

  <h1>Contents</h1>

  <ul id="nav">
    <li><a href="#quickstart">Quick Start</a></li>
    <li><a href="#intro">Introduction</a></li>
    <li><a href="#equipment">Equipment</a></li>
    <li><a href="#getting-started">Getting Started</a></li>
    <li><a href="#blocks">Scratch Blocks</a></li>
    <li><a href="#examples">Example Projects</a></li>
  </ul>

  <a name="quickstart" />
  <h1>Quick Start</h1>
  <p>To use the extension, upload the <a href="http://khanning.github.io/scratch-littlebits-extension/littleBits_Scratch_Extension.ino">littleBits_Scratch_Extension.ino</a> to your littleBits Arduino bit, install the <a href="http://scratch.mit.edu/scratchr2/static/ext/download.html">Scratch Browser Plugin</a> (see notes below <a href="#firefox">for Firefox</a> and <a href="#chrome">for Chrome</a>), and then <a href="http://scratchx.org/?url=http://khanning.github.io/scratch-littlebits-extension/littlebits_extension.js">open the littleBits extension on ScratchX.org</a>.</p>

  <a name="intro" />
  <h1>Introduction</h1>

  <p>This <a target="_new" href="http://scratch.mit.edu">Scratch</a> extension allows you to connect your Scratch projects to the physical world using <a target="_new" href="http://littlebits.cc">littleBits</a>. Using littleBits you can create new ways to interact with Scratch through the use of inputs and outputs. For example, you might rotate the Scratch cat by turning a dimmer, or make a buzzer go off when you score a point in your game. The possibilities are only limited by your imagination!</p>

  <img width="600" src="res/screenshot.png" /><br /><em>Windmill simlulator using littleBits and Scratch.</em>

  <a name="equipment" />
  <h1>Equipment</h1>

  <h3>You will need:</h3>
  <ul>
    <li><a target="_new" href="http://littlebits.cc/bits/arduino">littleBits Arduino bit</a></li>
    <li><a target="_new" href="http://littlebits.cc/shop?filter=Power">littleBits Power bit</a></li>
    <li>Some littleBits <a target="_new" href="http://littlebits.cc/shop?filter=Input">Inputs</a> and <a target="_new" href="http://littlebits.cc/shop?filter=Output">Outputs</a></li>
    <li>Micro USB Cable</li>
  </ul>

  <a name="getting-started" />
  <h1>Getting Started</h1>

  <h3>Step 1 - Upload the Firmware</h3>
  <div class="step">
    <a name="firmware-codebender" />
    <div class="toggle-header" onclick="toggleDiv(this, '#firmware-codebender')">
      + Using codebender
    </div>
    <div class="toggle-div" id="firmware-codebender">
      <ol>
        <li>Install the codebender plugin:<br />On <b>Chrome/Chromium</b>, install the <a  href="https://chrome.google.com/webstore/detail/codebender-app/magknjdfniglanojbpadmpjlglepnlko">codebender app</a> in the Chrome Web Store</a><br />On <b>Firefox</b>, install the <a href="https://codebender.cc/codebender.xpi">codebender Add-on</a></li>
        <li>(Windows only) install the <a href="https://codebender.cc/drivers/windows-driver-installer.zip">device drivers</a></li>
        <li>Connect a Power bit to one of the Arduino's input pins and turn on the Power bit.<br /><img width=200 src="res/power-connection.png" /></li>
        <li>Connect the Arduino to your computer's USB port<br /><img width=200 src="res/usb-connection.png" /></li>
        <li>Make sure the correct board (Arduino Leonardo) and serial port is selected in the codebender window below and click "Run on Arduino"</li>
      </ol>
      <p>On <b>Mac</b>, the serial number will be something like <b>/dev/tty.usbmodem-1511</b>.<br />On <b>Windows</b>, the serial number will probably be the highest-numbered COM port.<br />(Or unplug the Arduino, check the menu, and then replug your Arduino and see what new port appears.)

      <iframe style="height: 510px; width: 100%; margin: 10px 0 10px;" allowTransparency="true" src="https://codebender.cc/embed/sketch:119499" frameborder="0"></iframe>
    </div>

    <a name="firmware-arduino" />
    <div class="toggle-header" onclick="toggleDiv(this, '#firmware-arduino')">
      + Using the Arduino IDE
    </div>
    <div class="toggle-div" id="firmware-arduino">
      <ol>
        <li>Download and install the <a href="http://www.arduino.cc/en/Main/Software">Arduino software</a> (<a href="http://www.arduino.cc/en/Guide/Windows">Windows instructions</a>, <a href="http://www.arduino.cc/en/Guide/MacOSX">Mac instructions</a>)</li>
        <li>Connect a Power bit to one of the Arduino's input pins and turn on the Power bit.<br /><img width=200 src="res/power-connection.png" /></li>
        <li>Connect the Arduino to your computer's USB port<br /><img width=200 src="res/usb-connection.png" /></li>
        <li>Open the <a href="http://khanning.github.io/scratch-littlebits-extension/littleBits_Scratch_Extension.ino">littleBits_Scratch_Extension.ino</a> firmware in the Arduino software<br /><img src="res/arduino.png" /></li>
        <li>Select Arduino Leonardo from the <b>Tools &gt; Board</b> menu<br /><img src="res/arduino-board.png" /></li>
        <li>Select your serial port from the <b>Tools &gt; Port</b> menu.<br />On Mac, it's something like <b>/dev/tty.usbmodem-1511</b>.<br />On Windows, it's probably the highest-numbered COM port.<br />(Or unplug the Arduino, check the menu, and then replug your Arduino and see what new port appears.)<br /><img src="res/arduino-port.png" /></li>
        <li>Click the upload button<br /><img src="res/arduino-upload.png" /></li>
      </ol>
    </div>
  </div>

  <h3>Step 2 - Install the Scratch Extensions Browser Plugin</h3>
  <div class="step">
    Download and install the <a href="https://scratch.mit.edu/info/ext_download/">Scratch Extensions Browser Plugin</a></li>
  </div>

  <h3>Step 3 - Load the littleBits extension on ScratchX</h3>
  <div class="step">
    <p>Launch the extension by going to the following URL:</p>
    <a target="_new" href="http://scratchx.org/?url=http://khanning.github.io/scratch-littlebits-extension/littlebits_extension.js ">http://scratchx.org/?url=http://khanning.github.io/scratch-littlebits-extension/littlebits_extension.js</a>
    <p><a name="firefox" />On <b>Firefox</b>, you might see "Allow scratchx.org to run "Scratch Device?". Click "Allow...".<br /><img width=700 src="res/firefox-plugin.png" /></p>
    <p>You might see another message, "Allow scratchx.org to run plugins?". Set both Adobe Flash and Scratch Device to "Allow and Remember" and click okay.<br /><img src="res/firefox-plugin2.png" /></p>
    <p><a name="chrome" />On <b>Chrome</b>, you'll need to enable NPAPI plugins. Go to <a href="chrome://flags/#enable-npapi">chrome://flags/#enable-npapi</a> and click enable:<br /><img src="res/chrome-npapi.png" /></p>
    <p>Then, click "Relaunch Now" button:<br /><img src="res/chrome-npapi3.png" /></p>
    <p>Then, when you go to ScratchX.org, you should see a puzzle piece icon with an X on it: <img src="res/chrome-plugin-broken.png" width="25" />. Click on it and select "Always allow plug-ins on scratchx.org":<br /><img src="res/chrome-plugin-enable.png" /></p>
    <p>When you see the indicator light in the "More Blocks" tab turn green your ready to start using the extension!</p>
    <img width=200 src="res/connected.png" alt="Green indicator light" />
  </div>

  <h3>Step 4 - Have fun and be creative!</h3>
  <div class="step">
    <h4>A Few Additional Notes:</h4>
    <p>Some of the input bits need to have power going through them. The <a target="_new" href="http://littlebits.cc/bits/fork">Fork bit</a> is very useful for running power to multiple inputs.</p>
    <p>If the Arduino bit loses it's connection to the Power bit you will have to wait a few seconds while it reconnects itself with Scratch. The littleBits <a target="_new" href="http://littlebits.cc/accessories/mounting-board">Mounting Boards</a> or these <a target="_new" href="http://www.thingiverse.com/thing:727647">3D printed littleBits sandals</a> are very useful for keeping everything connected.</p>
    <p>Now take a look at the <a href="#blocks">Scratch Blocks</a> and the <a href="#examples">example projects</a> to learn how to use the extension.
  </div>

  <a name="blocks" />
  <h1>Scratch Blocks</h1>
  <p>This is a brief description of each of the Scratch blocks included with the littleBits extension.</p>
  <br />

  <div class="block">
  <img height="39" src="res/blocks/writedigital.png" />
  <p>Sets one of the output pins (d1, d5, d7) to on (full power) or off (no power).</p>
  </div>

  <hr />

  <div class="block">
  <img height="39" src="res/blocks/writeanalog.png" />
  <p>Sets one of the PWM output pins (d5, d7) to a value between 0 - 255.<br />0 = no power.<br />255 = full power.</p>
  </div>

  <hr />

  <div class="block">
  <img height="32" src="res/blocks/readdigital.png" />
  <p>Boolean block that returns true if an input pin (d0, a0, a1) is on (receiving voltage greater than 3v) and false if the input pin is off (receiving voltage less than 3v).</p>
  </div>

  <hr />

  <div class="block">
  <img height="32" src="res/blocks/readanalog.png" />
  <p>Reads a value from an analog input pin (a0, a1).</p>
  </div>

  <hr />

  <div class="block">
  <img height="52" src="res/blocks/whendigital.png" />
  <p>Hat block that executes when an input pin is switched on (receiving a voltage greater than 3v) or off (receiving a voltage less than 3v).</p>
  </div>

  <hr />

  <div class="block">
  <img height="52" src="res/blocks/whenanalog.png" />
  <p>Hat block that executes when an input pin is greater than, less than, or equal to a specified number.</p>
  </div>

  <hr />

  <div class="block">
  <img height="32" src="res/blocks/map.png" />
  <p>Maps a value between two ranges of numbers.</p>
  <p>This comes in handy when you're trying to use an input value (0 - 1023) to set an output value (0 - 255)</p>
  </div>

  <a name="examples" />
  <h1>Example Projects</h1>

  <dl>
    <dt><a target="_new" href="http://scratchx.org/?url=http://khanning.github.io/scratch-arduino-extension/arduino_extension.js&url=http://khanning.github.io/scratch-arduino-extension/examples/Arduino%20Example%20-%20Blink%20a%20LED.sbx">Blink a LED</a></dt>
    <dd>Make a LED blink on and off</dd>
    <br />
  </dl>
  
</div>

<br />

</body>
</html>
